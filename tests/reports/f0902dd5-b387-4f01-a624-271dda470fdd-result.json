{"name": "test_api_audit[case4]", "status": "failed", "statusDetails": {"message": "AssertionError: assert '非法的项目id' == '项目不在审核中状态'\n  - 项目不在审核中状态\n  + 非法的项目id", "trace": "self = <tests.test_audit.Test_Audit object at 0x00000204E55FAEB8>\ncase = {'Headers': '{\"Content-Type\":\"application/json\",\"X-Lemonban-Media-Type\":\"lemonban.v2\",\"Authorization\":None}', 'auto_script': '非法的项目id', 'case_id': 5, 'data': '{\\n    \"loan_id\":\"#yes_id#\",\\n    \"approved_or_not\":\"true\"\\n\\n}', ...}\nget_root_token = ({'N_id': 2064912, 'get_id': 2037397, 'give_id': 2052534, 'no_id': 2037790, ...}, {'shenhe': 'Bearer eyJhbGciOiJIUzUxM...2OH0.1GgaFWZ71OaRQ88ag6W2odW9WgeK2Ve3aNUDnPnOv-J7EqPD0qdqmTgaRheGlQGypDhBtBPWbzebLPiIJt37dA', 'shenhe_id': 1000337288})\nget_token = ('Bearer eyJhbGciOiJIUzUxMiJ9.eyJtZW1iZXJfaWQiOjEwMDAzMzcyNjUsImV4cCI6MTYxOTQxODQ2OH0.H5s8pSRMZRQcs8mpZV0q7WfT4F-RBDY3F4XqTuTg4E25MqYIZOZJZKSaEcSKGnuCTFxzvXD0DOw7WeUGAST67Q', 1000337265)\n\n    @pytest.mark.parametrize(\"case\",cases)\n    def test_api_audit(self,case,get_root_token,get_token):\n        data = self.mid_case.re_repelace(case[\"data\"], 1)\n        excepted = case[\"excepted\"]\n        head = eval(case[\"Headers\"])\n        if head[\"Authorization\"]:\n            head[\"Authorization\"] =  get_token[0]\n        else:\n            head[\"Authorization\"] = get_root_token[1][\"shenhe\"]\n        if case[\"case_id\"] == 3:\n            respose =  self.mid_obj.req_obj.send_request(method=case[\"method\"], url=self.url, data=data, headers=head)\n        else:\n            data = eval(data)\n            respose = self.mid_obj.req_obj.send_request(method=case[\"method\"], url=self.url, json=data, headers=head)\n    \n        #断言\n        try:\n            for k,v in eval(case[\"excepted\"]).items():\n                assert jsonpath.jsonpath(respose, k)[0] == v\n            self.mid_obj.logger.info(\"第{}条测试用例通过,请求参数是{}\".format(case[\"case_id\"], data))\n            self.excel.write_data(row=case[\"case_id\"] + 1, column=9, value=\"pass\")\n        except AssertionError as e:\n            Midd_Ware.logger.info(\"第{}条测试用例不通过 ！\\n 请求体是{} 请求内容是{}。预期结果是{}---返回结果是{}\".format(case[\"case_id\"], data, case[\"title\"],excepted,respose[\"msg\"]))\n            self.excel.write_data(row=case[\"case_id\"] + 1, column=9, value=\"failure\")\n>           raise e\n\ntest_audit.py:45: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <tests.test_audit.Test_Audit object at 0x00000204E55FAEB8>\ncase = {'Headers': '{\"Content-Type\":\"application/json\",\"X-Lemonban-Media-Type\":\"lemonban.v2\",\"Authorization\":None}', 'auto_script': '非法的项目id', 'case_id': 5, 'data': '{\\n    \"loan_id\":\"#yes_id#\",\\n    \"approved_or_not\":\"true\"\\n\\n}', ...}\nget_root_token = ({'N_id': 2064912, 'get_id': 2037397, 'give_id': 2052534, 'no_id': 2037790, ...}, {'shenhe': 'Bearer eyJhbGciOiJIUzUxM...2OH0.1GgaFWZ71OaRQ88ag6W2odW9WgeK2Ve3aNUDnPnOv-J7EqPD0qdqmTgaRheGlQGypDhBtBPWbzebLPiIJt37dA', 'shenhe_id': 1000337288})\nget_token = ('Bearer eyJhbGciOiJIUzUxMiJ9.eyJtZW1iZXJfaWQiOjEwMDAzMzcyNjUsImV4cCI6MTYxOTQxODQ2OH0.H5s8pSRMZRQcs8mpZV0q7WfT4F-RBDY3F4XqTuTg4E25MqYIZOZJZKSaEcSKGnuCTFxzvXD0DOw7WeUGAST67Q', 1000337265)\n\n    @pytest.mark.parametrize(\"case\",cases)\n    def test_api_audit(self,case,get_root_token,get_token):\n        data = self.mid_case.re_repelace(case[\"data\"], 1)\n        excepted = case[\"excepted\"]\n        head = eval(case[\"Headers\"])\n        if head[\"Authorization\"]:\n            head[\"Authorization\"] =  get_token[0]\n        else:\n            head[\"Authorization\"] = get_root_token[1][\"shenhe\"]\n        if case[\"case_id\"] == 3:\n            respose =  self.mid_obj.req_obj.send_request(method=case[\"method\"], url=self.url, data=data, headers=head)\n        else:\n            data = eval(data)\n            respose = self.mid_obj.req_obj.send_request(method=case[\"method\"], url=self.url, json=data, headers=head)\n    \n        #断言\n        try:\n            for k,v in eval(case[\"excepted\"]).items():\n>               assert jsonpath.jsonpath(respose, k)[0] == v\nE               AssertionError: assert '非法的项目id' == '项目不在审核中状态'\nE                 - 项目不在审核中状态\nE                 + 非法的项目id\n\ntest_audit.py:39: AssertionError"}, "attachments": [{"name": "log", "source": "8f1c70bc-d16f-4b46-b6dd-dae66d37dad9-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "29db1d08-aa54-46b1-a8b5-66564b822707-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "case", "value": "{'case_id': 5, 'interface': '审核项目', 'url': '/loan/audit', 'method': 'PATCH', 'title': '审核一个已经审核通过的项目', 'data': '{\\n    \"loan_id\":\"#yes_id#\",\\n    \"approved_or_not\":\"true\"\\n\\n}', 'Headers': '{\"Content-Type\":\"application/json\",\"X-Lemonban-Media-Type\":\"lemonban.v2\",\"Authorization\":None}', 'excepted': '{\"$..code\":2, \"$..msg\": \"项目不在审核中状态\"}', 'result': 'failure', 'auto_script': '非法的项目id'}"}], "start": 1619418170641, "stop": 1619418170879, "uuid": "15ce3afd-60ef-4561-8540-744d21ca237f", "historyId": "35f9afde0fa790f5fd1abf0cb657fc17", "testCaseId": "b4fbaf9314ba85c67acc5815b54923c3", "fullName": "test_audit.Test_Audit#test_api_audit", "labels": [{"name": "tag", "value": "@pytest.mark.usefixtures('init_audit')"}, {"name": "suite", "value": "test_audit"}, {"name": "subSuite", "value": "Test_Audit"}, {"name": "host", "value": "DESKTOP-AC1MULO"}, {"name": "thread", "value": "12600-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_audit"}]}